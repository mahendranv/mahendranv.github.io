<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Designing a bottom navigation bar with Jetpack compose" /><meta property="og:locale" content="en" /><meta name="description" content="Intro" /><meta property="og:description" content="Intro" /><link rel="canonical" href="https://mahendranv.github.io/posts/compose-bottom-bar/" /><meta property="og:url" content="https://mahendranv.github.io/posts/compose-bottom-bar/" /><meta property="og:site_name" content="Mahendran" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-07-30T00:00:00+05:30" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Designing a bottom navigation bar with Jetpack compose" /><meta name="twitter:site" content="@mahevelai" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"headline":"Designing a bottom navigation bar with Jetpack compose","dateModified":"2021-07-30T00:00:00+05:30","datePublished":"2021-07-30T00:00:00+05:30","description":"Intro","url":"https://mahendranv.github.io/posts/compose-bottom-bar/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://mahendranv.github.io/posts/compose-bottom-bar/"},"@context":"https://schema.org"}</script><title>Designing a bottom navigation bar with Jetpack compose | Mahendran</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Mahendran"><meta name="application-name" content="Mahendran"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/614333/01be055d-c668-46ba-8f7b-54065256c70d.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Mahendran</a></div><div class="site-subtitle font-italic">Android | Kotlin | Springboot | DGS</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/series/" class="nav-link"> <i class="fa-fw fas fas fa-list-ol ml-xl-3 mr-xl-3 unloaded"></i> <span>SERIES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/mahendranv" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/mahevelai" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://dev.to/mahendranv" aria-label="dev.to" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-dev"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG ‚Ä∫ <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Designing a bottom navigation bar with Jetpack compose</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Designing a bottom navigation bar with Jetpack compose</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Mahendran Vadivalagan </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Jul 30, 2021, 12:00 AM +0530" >Jul 30<i class="unloaded">2021-07-30T00:00:00+05:30</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="990 words">5 min read</span></div></div><div class="post-content"><h2 id="intro">Intro</h2><p>This article covers the design aspect of the bottom navigation bar using Jetpack compose. We‚Äôre looking at a simple composable with few customizable params for the icons. Take this as an approach doc for designing UI rather than an API guide. The result will look like this.</p><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2dku2am921cqdw5nmj0s.gif" alt="Final" /></p><hr /><h2 id="-analysis">üìê Analysis</h2><p>Let‚Äôs dissect this view and see how to build this.</p><ol><li>This is a row with equal space around each icon<li>At a time only one icon can be selected<li>All the icons are of the same size except the selected one, which is at 1.5x<li>Row accounts for the larger icon as well and all the icons are vertically center aligned</ol><h3 id="interactions">Interactions</h3><p>When an icon is selected, it scales up to 1.5x and changes its color change to blue. And previously selected icon resets to 1x and goes back to grey color. This transition is not sudden and happens over a particular time.</p><hr /><h2 id="Ô∏è-building-the-ui">üèóÔ∏è Building the UI</h2><p>UI is straightforward here. Icons and a Row that holds them. So, the first step is to prepare a few ingredients to build the UI. Add material extended icons in Gradle dependency and pick some for the navbar.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="kd">val</span> <span class="py">navBarItems</span> <span class="p">=</span> <span class="nf">arrayOf</span><span class="p">(</span>
    <span class="nc">Icons</span><span class="p">.</span><span class="nc">Outlined</span><span class="p">.</span><span class="nc">Home</span><span class="p">,</span>
    <span class="nc">Icons</span><span class="p">.</span><span class="nc">Outlined</span><span class="p">.</span><span class="nc">Send</span><span class="p">,</span>
    <span class="nc">Icons</span><span class="p">.</span><span class="nc">Outlined</span><span class="p">.</span><span class="nc">FavoriteBorder</span><span class="p">,</span>
    <span class="nc">Icons</span><span class="p">.</span><span class="nc">Outlined</span><span class="p">.</span><span class="nc">PersonOutline</span><span class="p">,</span>
<span class="p">)</span>
</pre></table></code></div></div><p>Choose two colors for selected and unselected state:</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="kd">val</span> <span class="py">COLOR_NORMAL</span> <span class="p">=</span> <span class="nc">Color</span><span class="p">(</span><span class="mh">0xffEDEFF4</span><span class="p">)</span>
<span class="k">private</span> <span class="kd">val</span> <span class="py">COLOR_SELECTED</span> <span class="p">=</span> <span class="nc">Color</span><span class="p">(</span><span class="mh">0xff496DE2</span><span class="p">)</span>
</pre></table></code></div></div><p>Define a base icon size. This will be scaled up to 1.5x when selected. Also, it‚Äôs a good practice to make most of the properties configurable with default values. After all, we‚Äôre dealing with functions here.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="kd">val</span> <span class="py">ICON_SIZE</span> <span class="p">=</span> <span class="mi">24</span><span class="p">.</span><span class="n">dp</span>
</pre></table></code></div></div><p>‚Ä¶</p><p>Let‚Äôs start with icons and build a row of them.</p><h3 id="animated-icons">Animated icons:</h3><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9unw3efj3p7wj3tyqkcz.gif" alt="Icon animation" /></p><p>From the icons aspect, it hoists its click to the parent and expects its parent to tell which state it should move to. The icon has one responsibility - to animate its color and scale when the properties are set. It doesn‚Äôt know about its state. All it knows is to smoothly change the values.</p><blockquote><p>Quick note about compose animation - it always tries to transition from the current value to the target value. Asking for the start value might lead to a jump in animations, which is avoided here. IMO compose team did it well here.</p></blockquote><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">AnimatableIcon</span><span class="p">(</span>
    <span class="n">imageVector</span><span class="p">:</span> <span class="nc">ImageVector</span><span class="p">,</span>
    <span class="n">modifier</span><span class="p">:</span> <span class="nc">Modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">,</span>
    <span class="n">iconSize</span><span class="p">:</span> <span class="nc">Dp</span> <span class="p">=</span> <span class="nc">ICON_SIZE</span><span class="p">,</span>
    <span class="n">scale</span><span class="p">:</span> <span class="nc">Float</span> <span class="p">=</span> <span class="mf">1f</span><span class="p">,</span>
    <span class="n">color</span><span class="p">:</span> <span class="nc">Color</span> <span class="p">=</span> <span class="nc">COLOR_NORMAL</span><span class="p">,</span>
    <span class="n">onClick</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Animation params</span>
    <span class="kd">val</span> <span class="py">animatedScale</span><span class="p">:</span> <span class="nc">Float</span> <span class="k">by</span> <span class="nf">animateFloatAsState</span><span class="p">(</span>
        <span class="n">targetValue</span> <span class="p">=</span> <span class="n">scale</span><span class="p">,</span>
        <span class="c1">// Here the animation spec serves no purpose but to demonstrate in slow speed.</span>
        <span class="n">animationSpec</span> <span class="p">=</span> <span class="nc">TweenSpec</span><span class="p">(</span>
            <span class="n">durationMillis</span> <span class="p">=</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="n">easing</span> <span class="p">=</span> <span class="nc">FastOutSlowInEasing</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="kd">val</span> <span class="py">animatedColor</span> <span class="k">by</span> <span class="nf">animateColorAsState</span><span class="p">(</span>
        <span class="n">targetValue</span> <span class="p">=</span> <span class="n">color</span><span class="p">,</span>
        <span class="n">animationSpec</span> <span class="p">=</span> <span class="nc">TweenSpec</span><span class="p">(</span>
            <span class="n">durationMillis</span> <span class="p">=</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="n">easing</span> <span class="p">=</span> <span class="nc">FastOutSlowInEasing</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="nc">IconButton</span><span class="p">(</span>
        <span class="n">onClick</span> <span class="p">=</span> <span class="n">onClick</span><span class="p">,</span>
        <span class="n">modifier</span> <span class="p">=</span> <span class="n">modifier</span><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="n">iconSize</span><span class="p">)</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nc">Icon</span><span class="p">(</span>
            <span class="n">imageVector</span> <span class="p">=</span> <span class="n">imageVector</span><span class="p">,</span>
            <span class="n">contentDescription</span> <span class="p">=</span> <span class="s">"dummy"</span><span class="p">,</span>
            <span class="n">tint</span> <span class="p">=</span> <span class="n">animatedColor</span><span class="p">,</span>
            <span class="n">modifier</span> <span class="p">=</span> <span class="n">modifier</span><span class="p">.</span><span class="nf">scale</span><span class="p">(</span><span class="n">animatedScale</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Animated icon composable holds two animatable values and is set to corresponding attributes. To interact with its parent, it exposes an onClick lambda. And animation target values are passed from the parent.</p><p>‚Ä¶</p><p>Before plug this into Row, try it out with a preview. As our icon is a dumb view, the preview will have unusual responsibilities. It toggles selection and updates the correct scale/color to the icon. On the other hand, a wrapper Composable could be built with a preset of selected/normal attributes and take a boolean to update the same. Again, it‚Äôs a function.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="nd">@Preview</span><span class="p">(</span><span class="n">group</span> <span class="p">=</span> <span class="s">"Icon"</span><span class="p">)</span>
<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">previewIcon</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Surface</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="py">selected</span> <span class="k">by</span> <span class="nf">remember</span> <span class="p">{</span>
            <span class="nf">mutableStateOf</span><span class="p">(</span><span class="k">false</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="nc">AnimatableIcon</span><span class="p">(</span>
            <span class="n">imageVector</span> <span class="p">=</span> <span class="nc">Icons</span><span class="p">.</span><span class="nc">Outlined</span><span class="p">.</span><span class="nc">FavoriteBorder</span><span class="p">,</span>
            <span class="n">scale</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">selected</span><span class="p">)</span> <span class="mf">1.5f</span> <span class="k">else</span> <span class="mf">1f</span><span class="p">,</span>
            <span class="n">color</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">selected</span><span class="p">)</span> <span class="nc">COLOR_SELECTED</span> <span class="k">else</span> <span class="nc">COLOR_NORMAL</span><span class="p">,</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="n">selected</span> <span class="p">=</span> <span class="p">!</span><span class="n">selected</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><hr /><h3 id="row-design">Row design</h3><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wyhly65vqrc83h16cxo4.gif" alt="Alt Text" /></p><p>From the requirements, the row is responsible for horizontally placing all the icons and update their scale/color based on selected index. It doesn‚Äôt know how the icons react to it. In order to observe whether an icon clicked, it listens to the click and updates the selected index.</p><p>Apart from the above responsibilities, the row aligns icons as described in the analysis part. To remember which position is selected, it uses a mutable state. This will be updated on icon click and read before setting scale/color for the icons.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">BottomNavBar2</span><span class="p">(</span>
    <span class="n">modifier</span><span class="p">:</span> <span class="nc">Modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">,</span>
    <span class="n">iconSize</span><span class="p">:</span> <span class="nc">Dp</span> <span class="p">=</span> <span class="nc">ICON_SIZE</span><span class="p">,</span>
    <span class="n">selectedIconScale</span><span class="p">:</span> <span class="nc">Float</span> <span class="p">=</span> <span class="mf">1.5f</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="py">selectedIndex</span> <span class="k">by</span> <span class="nf">remember</span> <span class="p">{</span>
        <span class="nf">mutableStateOf</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="nc">Row</span><span class="p">(</span>
        <span class="n">verticalAlignment</span> <span class="p">=</span> <span class="nc">Alignment</span><span class="p">.</span><span class="nc">CenterVertically</span><span class="p">,</span>
        <span class="n">horizontalArrangement</span> <span class="p">=</span> <span class="nc">Arrangement</span><span class="p">.</span><span class="nc">SpaceEvenly</span><span class="p">,</span>
        <span class="n">modifier</span> <span class="p">=</span> <span class="n">modifier</span>
            <span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="n">vertical</span> <span class="p">=</span> <span class="mi">8</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="n">iconSize</span><span class="p">.</span><span class="nf">times</span><span class="p">(</span><span class="n">selectedIconScale</span><span class="p">))</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">((</span><span class="n">index</span><span class="p">,</span> <span class="n">icon</span><span class="p">)</span> <span class="k">in</span> <span class="n">navBarItems</span><span class="p">.</span><span class="nf">withIndex</span><span class="p">())</span> <span class="p">{</span>
            <span class="nc">AnimatableIcon</span><span class="p">(</span>
                <span class="n">imageVector</span> <span class="p">=</span> <span class="n">icon</span><span class="p">,</span>
                <span class="n">scale</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">selectedIndex</span> <span class="p">==</span> <span class="n">index</span><span class="p">)</span> <span class="mf">1.5f</span> <span class="k">else</span> <span class="mf">1.0f</span><span class="p">,</span>
                <span class="n">color</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">selectedIndex</span> <span class="p">==</span> <span class="n">index</span><span class="p">)</span> <span class="nc">COLOR_SELECTED</span> <span class="k">else</span> <span class="nc">COLOR_NORMAL</span><span class="p">,</span>
                <span class="n">iconSize</span> <span class="p">=</span> <span class="nc">ICON_SIZE</span><span class="p">,</span>
            <span class="p">)</span> <span class="p">{</span>
                <span class="n">selectedIndex</span> <span class="p">=</span> <span class="n">index</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></table></code></div></div><p>Finally, put the bottom nav bar inside a preview and interact with it.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@Preview</span><span class="p">(</span><span class="n">group</span> <span class="p">=</span> <span class="s">"Main"</span><span class="p">,</span> <span class="n">name</span> <span class="p">=</span> <span class="s">"Bottom bar - animated"</span><span class="p">)</span>
<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">previewBottomNavBar2</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Surface</span> <span class="p">{</span>
        <span class="nc">BottomNavBar2</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><hr /><h2 id="-endnote">üìñ Endnote:</h2><p>This navigation bar is a very basic implementation. It doesn‚Äôt even have a callback setup for selection change. And icons are hardcoded. It is a good idea to use the material <code class="language-plaintext highlighter-rouge">BottomNavigation</code> as it is well tested and can interact with Snackbar and also has a FAB cradle. Use this as a quickguide on how to keep a view dumb and do state hoisting.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/android/'>Android</a>, <a href='/categories/compose/'>Compose</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/tags/compose/" class="post-tag no-text-decoration" >compose</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Designing a bottom navigation bar with Jetpack compose - Mahendran&url=https://mahendranv.github.io/posts/compose-bottom-bar/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Designing a bottom navigation bar with Jetpack compose - Mahendran&u=https://mahendranv.github.io/posts/compose-bottom-bar/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Designing a bottom navigation bar with Jetpack compose - Mahendran&url=https://mahendranv.github.io/posts/compose-bottom-bar/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/viewmodel-store/">Android ‚Äî ViewModel factory and instantiation</a><li><a href="/posts/compose-shapes-gists/">I created few shapes in Jetpack compose / Gist included</a><li><a href="/posts/compose-shapes/">Jetpack compose - shape your views</a><li><a href="/posts/timer/">Android ‚Äî Implementing LifecycleAwareTimer</a><li><a href="/posts/bon-apetit/">Hackerrank - bon-appetit problem solution in Kotlin</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/graphql/">graphql</a> <a class="post-tag" href="/tags/springboot/">springboot</a> <a class="post-tag" href="/tags/compose/">compose</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/dribbble/">dribbble</a> <a class="post-tag" href="/tags/tools/">tools</a> <a class="post-tag" href="/tags/beginners/">beginners</a> <a class="post-tag" href="/tags/blog/">blog</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/compose-shapes/"><div class="card-body"> <span class="timeago small" >Jun 23<i class="unloaded">2021-06-23T00:00:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Jetpack compose - shape your views</h3><div class="text-muted small"><p> Jetpack compose has an elegant way to cut out a Compose view into the desired shape. I‚Äôm covering few shapes that are available in the core compose lib and where do they differ. All the shapes dis...</p></div></div></a></div><div class="card"> <a href="/posts/compose-shapes-gists/"><div class="card-body"> <span class="timeago small" >Jul 9<i class="unloaded">2021-07-09T00:00:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>I created few shapes in Jetpack compose / Gist included</h3><div class="text-muted small"><p> Sharing few of my jetpack-compose shapes here. Did path tracing and drew path on canvas. Heart üöÄ - Gist Tag üöÄ - Gist Polygons üöÄ - Gist Car üöÄ - Gist üë∑ Tool set Figma fo...</p></div></div></a></div><div class="card"> <a href="/posts/compose-dropdown/"><div class="card-body"> <span class="timeago small" >May 13<i class="unloaded">2021-05-13T00:00:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Jetpack compose ‚Äî DropdownMenu ‚Äî Weather UI</h3><div class="text-muted small"><p> Introduction Sharing my experience with jetpack while practicing with the weather - forecast screen(from uptechteam). While surfing dribble this particular shot caught my eye. Minimal - subtle col...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/compose-shapes-gists/" class="btn btn-outline-primary" prompt="Older"><p>I created few shapes in Jetpack compose / Gist included</p></a> <a href="/posts/hilt-viewmodel/" class="btn btn-outline-primary" prompt="Newer"><p>Android ‚Äî Basic Hilt setup with viewmodel + fragment</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> ¬© 2021 <a href="https://twitter.com/mahevelai">Mahendran Vadivalagan</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/graphql/">graphql</a> <a class="post-tag" href="/tags/springboot/">springboot</a> <a class="post-tag" href="/tags/compose/">compose</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/dribbble/">dribbble</a> <a class="post-tag" href="/tags/tools/">tools</a> <a class="post-tag" href="/tags/beginners/">beginners</a> <a class="post-tag" href="/tags/blog/">blog</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://mahendranv.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
