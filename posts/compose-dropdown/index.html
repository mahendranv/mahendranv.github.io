<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Jetpack compose — DropdownMenu — Weather UI" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://mahendranv.github.io/posts/compose-dropdown/" /><meta property="og:url" content="https://mahendranv.github.io/posts/compose-dropdown/" /><meta property="og:site_name" content="Mahendran" /><meta property="og:image" content="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llkri0z57qisq0vpsb0i.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-05-13T00:00:00+05:30" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llkri0z57qisq0vpsb0i.jpg" /><meta property="twitter:title" content="Jetpack compose — DropdownMenu — Weather UI" /><meta name="twitter:site" content="@mahevelai" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"image":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/llkri0z57qisq0vpsb0i.jpg","headline":"Jetpack compose — DropdownMenu — Weather UI","dateModified":"2021-05-13T00:00:00+05:30","datePublished":"2021-05-13T00:00:00+05:30","description":"Introduction","url":"https://mahendranv.github.io/posts/compose-dropdown/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://mahendranv.github.io/posts/compose-dropdown/"},"@context":"https://schema.org"}</script><title>Jetpack compose — DropdownMenu — Weather UI | Mahendran</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Mahendran"><meta name="application-name" content="Mahendran"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/614333/01be055d-c668-46ba-8f7b-54065256c70d.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Mahendran</a></div><div class="site-subtitle font-italic">Android | Kotlin | Springboot | DGS</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/series/" class="nav-link"> <i class="fa-fw fas fas fa-list-ol ml-xl-3 mr-xl-3 unloaded"></i> <span>SERIES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/mahendranv" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/mahevelai" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://dev.to/mahendranv" aria-label="dev.to" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-dev"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Jetpack compose — DropdownMenu — Weather UI</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Jetpack compose — DropdownMenu — Weather UI</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Mahendran Vadivalagan </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, May 13, 2021, 12:00 AM +0530" >May 13<i class="unloaded">2021-05-13T00:00:00+05:30</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1030 words">5 min read</span></div></div><div class="post-content"><h2 id="introduction">Introduction</h2><p>Sharing my experience with jetpack while practicing with the weather - forecast screen(from uptechteam). While surfing dribble this particular shot caught my eye. Minimal - subtle colors also simple layout to implement. Best fit if you want to start with any UI framework.</p><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/duvfi6mom2mk7u5aqne9.gif" alt="Alt Text" /></p><h2 id="anatomy">Anatomy</h2><p>This page comprise of multiple sections, each will cover different ui element from compose. To make use of stacked layouts (box, row, column), I didn’t touch ConstraintLayout in this project.</p><ol><li>Top app bar → Popup window<li>Carousel of weather cards with indicator<li>List of forecast for the week</ol><h2 id="appbar---spinner">Appbar - Spinner</h2><p>App bar holds a back arrow and a <code class="language-plaintext highlighter-rouge">Spinner?!!</code> that helps user to switch between cities. Let’s focus on the popup window part.</p><p>In the old android system, this is a <code class="language-plaintext highlighter-rouge">Spinner</code> component with custom adapter (since we do color updates). This requires layouts defined for both anchor and list item, inflated at some point. Not to say about binding the content and updating the selected element. <em>Enogh with old Views.</em> Let’s see how to implement this in Jetpack.</p><h3 id="implementation">Implementation</h3><h3 id="anchor-view">Anchor view</h3><p>Create a <code class="language-plaintext highlighter-rouge">Row</code> container that holds the <em>Text</em> &amp; <em>Icon</em>. This will act as anchor for dropdown and ensure clicking both items will show the menu.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nc">Box</span> <span class="p">{</span>
  <span class="c1">// Back arrow here</span>
  <span class="nc">Row</span> <span class="p">{</span> <span class="c1">// Anchor view</span>
    <span class="nc">Text</span><span class="p">(</span><span class="n">text</span> <span class="p">=</span> <span class="s">""</span><span class="p">,)</span> <span class="c1">// City name label</span>
    <span class="nc">Icon</span><span class="p">(</span><span class="n">imageVector</span> <span class="p">=</span> <span class="nc">Icons</span><span class="p">.</span><span class="nc">Filled</span><span class="p">.</span><span class="nc">ArrowDropDown</span><span class="p">,)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aay0t6pzkwjatm5yudx9.png" alt="Alt Text" /></p><p>Now we don’t see any city name displayed in it. We can take a param for the <code class="language-plaintext highlighter-rouge">@Compose</code> function and update it. But we expect the name to change while picking a city from menu. Thankfully, we have a nice way of doing this in <strong>Compose</strong>.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c1">// State variables</span>
<span class="kd">var</span> <span class="py">cityName</span> <span class="p">:</span> <span class="nc">String</span> <span class="k">by</span> <span class="nf">remember</span> <span class="p">{</span><span class="nf">mutableStateOf</span><span class="p">(</span><span class="n">cityList</span><span class="p">[</span><span class="mi">0</span><span class="p">])}</span>

<span class="o">..</span><span class="p">.</span>

<span class="nc">Text</span><span class="p">(</span><span class="n">text</span> <span class="p">=</span> <span class="n">cityName</span><span class="p">,)</span> <span class="c1">// City name label</span>
</pre></table></code></div></div><p>Here, <strong>cityName</strong> is a local state that update the UI once the value change. We set the initial value to first item in the list.</p><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/odfa8m7gz7jvmdvv4hsd.png" alt="Alt Text" /></p><p>…</p><h4 id="dropdown-menu-design">Dropdown menu design</h4><p>Now we have the AppBar UI ready, let’s design dropdown menu.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="py">expanded</span> <span class="k">by</span> <span class="nf">remember</span> <span class="p">{</span> <span class="nf">mutableStateOf</span><span class="p">(</span><span class="k">false</span><span class="p">)}</span>

<span class="o">..</span><span class="p">.</span>

<span class="nc">Row</span> <span class="p">{</span> <span class="c1">// Anchor view</span>
    <span class="o">..</span><span class="p">.</span> 
    <span class="nc">DropdownMenu</span><span class="p">(</span>
      <span class="n">expanded</span> <span class="p">=</span> <span class="n">expanded</span><span class="p">,</span> 
      <span class="n">onDismissRequest</span> <span class="p">=</span> <span class="p">{})</span> <span class="p">{</span>
       <span class="c1">// TODO: Popup window content</span>
    <span class="p">}</span>
 <span class="p">}</span>
</pre></table></code></div></div><p>Here, we introduced a new state called <code class="language-plaintext highlighter-rouge">expanded</code>, which controls the visibility of menu. To show the window, we set it to true otherwise false. We know anchor controls the visibility, so add a click listener there.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>  <span class="nc">Row</span><span class="p">(</span><span class="nc">Modifier</span><span class="p">.</span><span class="nf">clickable</span> <span class="p">{</span> <span class="c1">// Anchor view</span>
    <span class="n">expanded</span> <span class="p">=</span> <span class="p">!</span><span class="n">expanded</span>
  <span class="p">})</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/isxrnc9z4jqt7lz0upt4.gif" alt="Alt Text" /></p><p>Running this, we get ripple - nothing more. This is because, we haven’t setup the menu. Let’s jump to it. Before adding, the actual content, let’s experiment with popup content.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">DropdownMenu</span> <span class="p">{</span>
  	<span class="nc">Text</span><span class="p">(</span><span class="s">"Popup content \nhere"</span><span class="p">,</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">24</span><span class="p">.</span><span class="n">dp</span><span class="p">))</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/e3c2ni15per7kpcxtjfx.gif" alt="Alt Text" /></p><p>Now the menu is shown, but we cannot dismiss it. As we saw earlier, the <code class="language-plaintext highlighter-rouge">expanded</code> variable is the only thing that can control the visibility.</p><p><strong>But.. we toggle it on clicking on anchor</strong>. This is because, the click event is not delivered to the anchor (note.. no ripple). A different callback stole it. Let’s figure out what to do.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">DropdownMenu</span><span class="p">(</span><span class="n">expanded</span> <span class="p">=</span> <span class="n">expanded</span><span class="p">,</span> 
             <span class="n">onDismissRequest</span> <span class="p">=</span> <span class="p">{</span>
               <span class="n">expanded</span> <span class="p">=</span> <span class="k">false</span>
             <span class="p">})</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/b8is0ynzcydi7ssn6ba5.gif" alt="Alt Text" /></p><p>The mandatory callback <code class="language-plaintext highlighter-rouge">onDismissRequest</code> , should be implemented to dismiss the menu. Otherwise, we’ll endup with a sticky popup like in previous step.</p><p>…</p><h3 id="menu-item-design">Menu item design</h3><p>We can place any <strong>Composable</strong> view in side the <em>DropdownMenu</em>. Current case, we need list of Label/Text in a column - each clickable. To keep the article short, I’m not demonstrating with a Column and Text list items. Keep these two points in mind and fast forward to the snippet.</p><ul><li><p><code class="language-plaintext highlighter-rouge">DropdownMenu</code> places the given content inside column. So we don’t have to add a <strong>Column</strong> manually. From DropdownMenu source:</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre> <span class="nd">@Composable</span>
 <span class="k">fun</span> <span class="nf">DropdownMenu</span><span class="p">(</span>
     <span class="n">expanded</span><span class="p">:</span> <span class="nc">Boolean</span><span class="p">,</span>
     <span class="n">onDismissRequest</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span><span class="p">,</span>
     <span class="o">..</span><span class="p">.</span>
     <span class="n">properties</span><span class="p">:</span> <span class="nc">PopupProperties</span> <span class="p">=</span> <span class="nc">PopupProperties</span><span class="p">(</span><span class="n">focusable</span> <span class="p">=</span> <span class="k">true</span><span class="p">),</span>
     <span class="n">content</span><span class="p">:</span> <span class="nd">@Composable</span> <span class="nc">ColumnScope</span><span class="p">.()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span>
 <span class="p">)</span>
</pre></table></code></div></div><li><p>Likewise, we have <code class="language-plaintext highlighter-rouge">DropdownMenuItem</code> container, which is a <code class="language-plaintext highlighter-rouge">Row</code> internally - can take care of placing line item’s content horizontally [ex. Country flag - Country name]. Also it ensures minimum height / width requirements met as per material design and has a click listener. From DropdownMenuItemContent source:</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre> <span class="nd">@Composable</span>
 <span class="k">internal</span> <span class="k">fun</span> <span class="nf">DropdownMenuItemContent</span><span class="p">(</span>
     <span class="n">onClick</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span><span class="p">,</span>
     <span class="n">content</span><span class="p">:</span> <span class="nd">@Composable</span> <span class="nc">RowScope</span><span class="p">.()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span>
 <span class="p">)</span> 
   
 <span class="o">..</span><span class="p">.</span>
 <span class="nc">Row</span><span class="p">()</span>
 <span class="p">.</span><span class="nf">sizeIn</span><span class="p">(</span>
   <span class="n">minWidth</span> <span class="p">=</span> <span class="nc">DropdownMenuItemDefaultMinWidth</span><span class="p">,</span>
   <span class="n">maxWidth</span> <span class="p">=</span> <span class="nc">DropdownMenuItemDefaultMaxWidth</span><span class="p">,</span>
   <span class="n">minHeight</span> <span class="p">=</span> <span class="nc">DropdownMenuItemDefaultMinHeight</span><span class="p">)</span>
</pre></table></code></div></div></ul><p>Let’s make use of above containers and cook the list items.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nc">DropdownMenu</span><span class="p">(</span><span class="o">..</span><span class="p">.)</span> <span class="p">{</span>
		<span class="n">cityList</span><span class="p">.</span><span class="nf">forEach</span> <span class="p">{</span> <span class="n">city</span> <span class="p">-&gt;</span>
				<span class="nc">DropdownMenuItem</span><span class="p">(</span><span class="n">onClick</span> <span class="p">=</span> <span class="p">{</span> <span class="p">})</span> <span class="p">{</span>
					<span class="nc">Text</span><span class="p">(</span><span class="n">city</span><span class="p">)</span>
				<span class="p">}</span>
			<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6fkfi9k7mlu2a2hmcdtn.gif" alt="Alt Text" /></p><p>We get a list with clickable items, but menu not dismissed and value not updated. It’s just matter of implementing the <code class="language-plaintext highlighter-rouge">onClick</code> in menu-item.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">cityList</span><span class="p">.</span><span class="nf">forEach</span> <span class="p">{</span> <span class="n">city</span> <span class="p">-&gt;</span>
   <span class="nc">DropdownMenuItem</span><span class="p">(</span><span class="n">onClick</span> <span class="p">=</span> <span class="p">{</span> 
     <span class="n">expanded</span> <span class="p">=</span> <span class="k">false</span>
     <span class="n">cityName</span> <span class="p">=</span> <span class="n">city</span>
   <span class="p">})</span> <span class="p">{</span>
        <span class="nc">Text</span><span class="p">(</span><span class="n">city</span><span class="p">)</span>
      <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5sb5w6zeks4ezikq1pva.gif" alt="Alt Text" /></p><p>With bit of style customization to menu item, we can highlight the current city in menu.</p><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span text-data=" Kotlin "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">val</span> <span class="py">isSelected</span> <span class="p">=</span> <span class="n">city</span> <span class="p">==</span> <span class="n">cityName</span>
<span class="kd">val</span> <span class="py">style</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">isSelected</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">MaterialTheme</span><span class="p">.</span><span class="n">typography</span><span class="p">.</span><span class="n">body1</span><span class="p">.</span><span class="nf">copy</span><span class="p">(</span>
        <span class="n">fontWeight</span> <span class="p">=</span> <span class="nc">FontWeight</span><span class="p">.</span><span class="nc">Bold</span><span class="p">,</span>
        <span class="n">color</span> <span class="p">=</span> <span class="nc">MaterialTheme</span><span class="p">.</span><span class="n">colors</span><span class="p">.</span><span class="n">secondary</span>
    <span class="p">)</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nc">MaterialTheme</span><span class="p">.</span><span class="n">typography</span><span class="p">.</span><span class="n">body1</span><span class="p">.</span><span class="nf">copy</span><span class="p">(</span>
        <span class="n">fontWeight</span> <span class="p">=</span> <span class="nc">FontWeight</span><span class="p">.</span><span class="nc">Normal</span><span class="p">,</span>
        <span class="n">color</span> <span class="p">=</span> <span class="nc">MaterialTheme</span><span class="p">.</span><span class="n">colors</span><span class="p">.</span><span class="n">onSurface</span>
    <span class="p">)</span>
<span class="p">}</span>
<span class="nc">Text</span><span class="p">(</span><span class="n">text</span><span class="p">=</span> <span class="n">city</span><span class="p">,</span> <span class="n">style</span> <span class="p">=</span> <span class="n">style</span><span class="p">)</span>
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/x2nauk29tobby0th3ql2.png" alt="Alt Text" /></p><p>…</p><h2 id="conclusion">Conclusion</h2><p>We can see the benefit of using composable here. In the old view system, Views has it’s own saved instance state backed by their ids this had few advantages, yet leaves the system unpredictable in many cases. Devs have to take care of keeping the UI and model in sync.</p><p>In compose, data drives the UI. Take a look at <em>cityName</em>, initial value set to the component — and then menu item click updates the variable name - not the Text/Label view. This is called unidirectional data flow. Data paints the UI, and UI updates the model. No UI vs UI communication happens here. That means, we don’t take value from the UI — rather state can give it to us.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/android/'>Android</a>, <a href='/categories/compose/'>Compose</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/tags/compose/" class="post-tag no-text-decoration" >compose</a> <a href="/tags/dribbble/" class="post-tag no-text-decoration" >dribbble</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Jetpack compose — DropdownMenu — Weather UI - Mahendran&url=https://mahendranv.github.io/posts/compose-dropdown/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Jetpack compose — DropdownMenu — Weather UI - Mahendran&u=https://mahendranv.github.io/posts/compose-dropdown/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Jetpack compose — DropdownMenu — Weather UI - Mahendran&url=https://mahendranv.github.io/posts/compose-dropdown/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/viewmodel-store/">Android — ViewModel factory and instantiation</a><li><a href="/posts/compose-shapes-gists/">I created few shapes in Jetpack compose / Gist included</a><li><a href="/posts/compose-shapes/">Jetpack compose - shape your views</a><li><a href="/posts/timer/">Android — Implementing LifecycleAwareTimer</a><li><a href="/posts/bon-apetit/">Hackerrank - bon-appetit problem solution in Kotlin</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/graphql/">graphql</a> <a class="post-tag" href="/tags/springboot/">springboot</a> <a class="post-tag" href="/tags/compose/">compose</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/dribbble/">dribbble</a> <a class="post-tag" href="/tags/tools/">tools</a> <a class="post-tag" href="/tags/beginners/">beginners</a> <a class="post-tag" href="/tags/blog/">blog</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/weather-card-compose/"><div class="card-body"> <span class="timeago small" >May 15<i class="unloaded">2021-05-15T00:00:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Weather forecast card design using Jetpack Compose</h3><div class="text-muted small"><p> Horizontal weather cards are the second portion in my forecast screen. It contains a message, relative timestamp and an image depicting the weather. Since I don’t have images in handy, I picked one...</p></div></div></a></div><div class="card"> <a href="/posts/compose-shapes/"><div class="card-body"> <span class="timeago small" >Jun 23<i class="unloaded">2021-06-23T00:00:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Jetpack compose - shape your views</h3><div class="text-muted small"><p> Jetpack compose has an elegant way to cut out a Compose view into the desired shape. I’m covering few shapes that are available in the core compose lib and where do they differ. All the shapes dis...</p></div></div></a></div><div class="card"> <a href="/posts/compose-shapes-gists/"><div class="card-body"> <span class="timeago small" >Jul 9<i class="unloaded">2021-07-09T00:00:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>I created few shapes in Jetpack compose / Gist included</h3><div class="text-muted small"><p> Sharing few of my jetpack-compose shapes here. Did path tracing and drew path on canvas. Heart 🚀 - Gist Tag 🚀 - Gist Polygons 🚀 - Gist Car 🚀 - Gist 👷 Tool set Figma fo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/sock-merchant/" class="btn btn-outline-primary" prompt="Older"><p>Sock merchant problem - Hackerrank</p></a> <a href="/posts/why-compose/" class="btn btn-outline-primary" prompt="Newer"><p>Why should I go for compose?</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/mahevelai">Mahendran Vadivalagan</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/graphql/">graphql</a> <a class="post-tag" href="/tags/springboot/">springboot</a> <a class="post-tag" href="/tags/compose/">compose</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/dribbble/">dribbble</a> <a class="post-tag" href="/tags/tools/">tools</a> <a class="post-tag" href="/tags/beginners/">beginners</a> <a class="post-tag" href="/tags/blog/">blog</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://mahendranv.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
